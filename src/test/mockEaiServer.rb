require 'sinatra'
require 'nokogiri'
get '/test1' do
  content_type 'text/xml'
  "<name>Luis</name><age>99</age>"
end

post '/eaistub' do
#  puts request.body.text
  doc = Nokogiri::XML(request.body)
  doc.css("SiebelMessage").each do |response_node|
    @event = response_node["BusinessEvent"]
  end
puts @event
# there are two types of events - one with a header and one with a SiebelMessage
  if @event.nil?
  	if(!doc.xpath("//Header//BusinessEvent").nil?&&!doc.xpath("//Header//BusinessEvent").empty?&&!doc.xpath("//Header//BusinessEvent")=="")
	    @event = doc.xpath("//Header//BusinessEvent")
	    @event = @event.text
  	else
	  	@event = doc.xpath("//BusinessEvent")
	    puts @event.text
	    @event = @event.text
	end
  end
puts @event
  if @event == "ServiceabilityCheck"
puts 'Responding for ServiceabilityCheck' 
     content_type 'text/xml'
     return "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"no\"?><SiebelMessage BusinessEvent = \"ServiceabilityCheck\" ErrorMessage = \"\" IntObjectFormat = \"PORTAL\" IntObjectName = \"PORTAL\" MessageId = \"1300005313934\" MessageType = \"PORTAL\" Timestamp = \"07/03/2015 10:49:50\"> <ListOfTmServiceabilityCheck> <TmServiceAddressVbc> <AddressId>261979</AddressId> <ApartmentNumber/> <TMFloorNo>7</TMFloorNo> <TMBuildingName>BLOK 2 PANGSAPURI ANGGERIK INDAH</TMBuildingName> <TMStreetType>JALAN</TMStreetType> <StreetAddress>SEMPADAN 16/7</StreetAddress> <StreetAddress2>SEKSYEN 16</StreetAddress2> <PostalCode>40200</PostalCode> <City>SHAH ALAM</City> <State>SELANGOR</State> <Country>MALAYSIA</Country> <CopperOwnTM>YES</CopperOwnTM> <DDP>SAL_F024_0030</DDP> </TmServiceAddressVbc> </ListOfTmServiceabilityCheck></SiebelMessage>"
# empty response, no address present
  elsif @event == "SBLAddressRetrieve1"
     puts "SBLAddressRetrieve"
     return "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><PortalMessage>    <Header>        <BusinessEvent>SBLAddressRetrieve</BusinessEvent>        <Timestamp>07/03/2015 10:52:08</Timestamp>        <ErrorCode/>        <ErrorMessage/>    </Header></PortalMessage>"
# one address will be returned.
  elsif @event == "SBLAddressRetrieve"
     puts "SBLAddressRetrieve"
     return "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><PortalMessage>    <Header>        <BusinessEvent>SBLAddressRetrieve</BusinessEvent>        <Timestamp>07/03/2015 10:52:08</Timestamp>        <ErrorCode/>        <ErrorMessage/>    </Header><Response> <SiebelAddress> <SiebelAddressId>2-1XV4F0U</SiebelAddressId> <OrderExist>N</OrderExist> <City>City</City> <Country>Country</Country> <PostalCode>PostalCode</PostalCode> <State>State</State> <Section>Section</Section> <UnitNumber>UnitNumber</UnitNumber> <AddressId>AddressId</AddressId> <StreetName>StreetName</StreetName> <BuildingName>BuildingName</BuildingName> <FloorNo>FloorNo</FloorNo> <StreetType>StreetType</StreetType> <SmartnessFlag>SmartnessFlag</SmartnessFlag> <ResellerMatchFlag>ResellerMatchFlag</ResellerMatchFlag> <OpenOrderFlag>N</OpenOrderFlag> </SiebelAddress> </Response></PortalMessage>"
  elsif @event == "CustomerProfileRetrieve"
    content_type 'text/xml'
    puts "CustomerProfileRetrieve"
    return "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><PortalMessage>    <Header>        <BusinessEvent>CustomerProfileRetrieve</BusinessEvent>     <Timestamp>07/03/2015 10:58:18</Timestamp> <ReqResType>Response</ReqResType> <ErrorCode/> <ErrorMessage/> </Header> <Response> <CustomerAccount> <PrimaryIDType>Passport</PrimaryIDType> <PrimaryIDNo>P6543</PrimaryIDNo><AccountNo>1-87P6TR5</AccountNo> </CustomerAccount> </Response> </PortalMessage>"
  elsif @event == "ValidateFraudCAMSCustomer"
    content_type 'text/xml'
    puts "ValidateFraudCAMSCustomer"
    return '<?xml version="1.0" encoding="utf-8" standalone="no"?><SiebelMessage><BusinessEvent>ValidateFraudCAMSCustomer</BusinessEvent><ErrorCode></ErrorCode><ErrorMessage></ErrorMessage><IntObjectFormat>PORTAL</IntObjectFormat><IntObjectName>PORTAL</IntObjectName><MessageId>EAI000000173648679</MessageId><Timestamp>03/07/2015 11:05:06</Timestamp><ListOfTmCamsCustomerIo><TmCamsCustomerVbc><BankGuaranteeAmount/><BankGuaranteeCurrency/><CPBR/><GreaterThan1Year/><CustomerID></CustomerID><DelinquentIndicator>Y</DelinquentIndicator><FraudIndicator>Y</FraudIndicator></TmCamsCustomerVbc></ListOfTmCamsCustomerIo></SiebelMessage>'
  elsif @event == "ValidateFraudCAMSAccount"
  	 content_type 'text/xml'
  	 puts "ValidateFraudCAMSAccount"
  	 return '<?xml version="1.0" encoding="utf-8" standalone="no"?><SiebelMessage><BusinessEvent>ValidateFraudCAMSAccount</BusinessEvent><ErrorCode></ErrorCode><ErrorMessage></ErrorMessage><IntObjectFormat>PORTAL</IntObjectFormat><IntObjectName>PORTAL</IntObjectName><MessageId>EAI000000173648679</MessageId><Timestamp>03/07/2015 11:05:06</Timestamp><ListOfTmCamsAccountIo><TmCamsAccountVbc><CustomerID></CustomerID><BlacklistType>Yes</BlacklistType><CPBR/><BANumber/><DelinquentAmount>Y</DelinquentAmount></TmCamsAccountVbc></ListOfTmCamsAccountIo></SiebelMessage>'
  elsif @event == "CustomerCreateCRM"
  	 content_type 'text/xml'
  	 puts "CustomerCreateCRM"
  	 return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><PortalMessage><Header><BusinessEvent>CustomerCreateCRM</BusinessEvent><Timestamp>07/03/2015 11:05:21</Timestamp><ErrorMessage/><ErrorCode/><ReqResType>Response</ReqResType></Header><Response><CustomerAccountNo>2-1XV49HP</CustomerAccountNo><CustomerContactID>2-1XV49HR</CustomerContactID> <Status>OK</Status><Priority>P04</Priority></Response></PortalMessage>'
   elsif @event == 'SBLAddressCreate'
	 puts 'Servicing SBLAddressCreate'
     return "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><PortalMessage>    <Header>        <BusinessEvent>SBLAddressCreate</BusinessEvent>        <Timestamp>06/15/2015 09:58:09</Timestamp>        <ReqResType>Response</ReqResType>        <ErrorCode/>        <ErrorMessage/>    </Header>    <Response>        <SiebelAddressId>1-4VKUXZ6</SiebelAddressId>        <Status>OK</Status>    </Response></PortalMessage>"   
   elsif @event == 'ServicePointCreate'
	 puts "Creating service point"
	 return  "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?> <PortalMessage>     <Response>         <ServicePointId>1-4VKW3AE</ServicePointId>         <Status>OK</Status>         <ServiceAddressRowId>1-9HSW5S</ServiceAddressRowId>         <ServicePointInstanceId>HS1018052707</ServicePointInstanceId>         <ReservationId>RESV1-4VKW3AE</ReservationId>     </Response>     <Header>         <BusinessEvent>ServicePointCreate</BusinessEvent>         <Timestamp>06/15/2015 09:59:03</Timestamp>         <ReqResType>Response</ReqResType>         <ErrorCode/>         <ErrorMessage/>     </Header> </PortalMessage> "
   elsif @event == 'ResourceAvailabilityCheck'
	 puts "checking resource availability"
	 return "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"no\"?><SiebelMessage BusinessEvent = \"ResourceAvailabilityCheck\" ErrorCode = \"\" ErrorMessage = \"\" IntObjectFormat = \"PORTAL\" IntObjectName = \"PORTAL\" MessageId = \"EAI000000596127508\" MessageType = \"PORTAL\"> <ListOfTmResourceAvailabilityCheck> <TmCutPremiseIntegration> <AddressId>2331290</AddressId> <Id>1-4F2X3PW</Id> <ListOfTmCutAssetMgmt-ServiceMeterIntegration> <TmCutAssetMgmt-ServiceMeterIntegration> <ServicePointInstanceId>HS1018052878</ServicePointInstanceId> <ListOfTmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>ServiceabilityFlag</Name> <Value>Y</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>ResourceabilityFlag</Name> <Value>Y</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>CopperTM</Name> <Value>Y</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>DDP</Name> <Value/> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>LocationDP</Name> <Value>ON POLE</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>TypeDP</Name> <Value>FTTH</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>FiberToPremise</Name> <Value>N</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>PremiseType</Name> <Value>LINK HOUSE(SINGLE/DOUBLE)</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>SiteNameExchange</Name> <Value>SC</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>TypeResource</Name> <Value>DP</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>BTUVoicePortCount</Name> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>BTUDataPortCount</Name> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>BTURemainingBW</Name> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>PremiseTypeClass</Name> <Value>Residential</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>CopperCond</Name> <Value>Good</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>BuildingTrunk</Name> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>BTU Indicator</Name> <Value>New</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>Premise Category</Name> <Value>Landed</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>Cable Type</Name> <Value>Fiber</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>SMARTDeveloper</Name> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>SMARTProjectID</Name> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration> <Name>NumberChange</Name> <Value>N</Value> </TmAssetMgmt-AssetXaIntegration> <TmAssetMgmt-AssetXaIntegration><Name>PPPTAGGING</Name> <Value>PPP</Value> </TmAssetMgmt-AssetXaIntegration> </ListOfTmAssetMgmt-AssetXaIntegration> <TMNewBTUFlag>Y</TMNewBTUFlag> <TMServiceTaxFlag>N</TMServiceTaxFlag> <TMHSBASendEmailFlag>N</TMHSBASendEmailFlag> <TMHSBABWThreshold>Current</TMHSBABWThreshold> </TmCutAssetMgmt-ServiceMeterIntegration> </ListOfTmCutAssetMgmt-ServiceMeterIntegration> </TmCutPremiseIntegration> </ListOfTmResourceAvailabilityCheck></SiebelMessage>"
  elsif @event == "AppointmentQueryPortalSWIFT"
    content_type 'text/xml'
    puts "AppointmentQueryPortalSWIFT"
    return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><PortalMessage><Header><BusinessEvent>AppointmentQueryPortalSWIFT</BusinessEvent><ErrorCode/><ErrorMessage/><ReqResType>Response</ReqResType></Header><Response><AppointmentAvailability><AppointmentID>S2A-1507038038F0-A</AppointmentID><EarliestStartDate>05/07/2015 09:30:00</EarliestStartDate><LatestStartDate>05/07/2015 12:00:00</LatestStartDate></AppointmentAvailability><AppointmentAvailability><AppointmentID>S2A-150703FFB60E-P</AppointmentID><EarliestStartDate>05/07/2015 13:30:00</EarliestStartDate><LatestStartDate>05/07/2015 16:00:00</LatestStartDate></AppointmentAvailability><AppointmentAvailability><AppointmentID>S2A-150703C18716-A</AppointmentID><EarliestStartDate>06/07/2015 09:30:00</EarliestStartDate><LatestStartDate>06/07/2015 12:00:00</LatestStartDate></AppointmentAvailability><AppointmentAvailability><AppointmentID>S2A-150703EBB41E-P</AppointmentID><EarliestStartDate>06/07/2015 13:30:00</EarliestStartDate><LatestStartDate>06/07/2015 16:00:00</LatestStartDate></AppointmentAvailability><Status>OK</Status></Response></PortalMessage>'
  elsif @event == "ServiceNumberSearch"
    content_type 'text/xml'
    puts "ServiceNumberSearch"
    return '<?xml version="1.0" encoding="utf-8" standalone="no"?> <SiebelMessage     BusinessEvent = "ServiceNumberSearch"     ErrorCode = ""     ErrorMessage = ""     IntObjectFormat = "PORTAL"     IntObjectName = "PORTAL"     MessageId = "EAI000000173648682"     MessageType = "PORTAL"     Timestamp = "">     <ListOfTmServiceNumberSearch>         <TmServiceNumberVbc>             <ServiceIdTN>60355234307</ServiceIdTN>             <OrderLineItemId>PORTAL</OrderLineItemId>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355234970</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355235807</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355236708</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355237634</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355238148</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355238304</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355238512</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355238762</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355239693</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355239948</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355240129</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355240168</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355240384</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355240542</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355240628</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355240859</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355241512</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355241582</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355241596</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355241710</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355242028</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355242243</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355242337</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355242380</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355242972</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355242996</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243415</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243452</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243543</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243546</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243599</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243676</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243724</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355243973</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355244182</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355244312</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355244313</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355244445</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355244795</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245265</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245376</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245421</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245489</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245618</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245671</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245708</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245836</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245838</ServiceIdTN>         </TmServiceNumberVbc>         <TmServiceNumberVbc>             <ServiceIdTN>60355245931</ServiceIdTN>         </TmServiceNumberVbc>     </ListOfTmServiceNumberSearch> </SiebelMessage>'
   elsif @event == "ServiceNumberReserve"
    content_type 'text/xml'
    puts "ServiceNumberReserve"
    return '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <SiebelMessage     BusinessEvent = "ServiceNumberReserve"     ErrorCode = ""     ErrorMessage = ""     IntObjectFormat = "PORTAL"     IntObjectName = "PORTAL"     MessageId = "1300005313934"     MessageType = "PORTAL"     Timestamp = "07/03/2015 11:10:50">     <ListOfTmServiceNumberReserve>         <TmOrderEntry-LineItemsIntegration>             <OrderLineItemId>PORTAL</OrderLineItemId>             <TMReservationStatus>Reserve Success</TMReservationStatus>             <TMMessageCodeExt>0</TMMessageCodeExt>             <ItemStatus>Order executed successfully</ItemStatus>             <TMSecondaryServiceId>27268</TMSecondaryServiceId>         </TmOrderEntry-LineItemsIntegration>     </ListOfTmServiceNumberReserve> </SiebelMessage>'
   elsif @event == "ResourceReserve"
    content_type 'text/xml'
    puts "ResourceReserve"
    return '<?xml version="1.0" encoding="utf-8" standalone="no"?><SiebelMessage    BusinessEvent = "ResourceReserve"    ErrorCode = ""    ErrorMessage = ""    IntObjectFormat = "PORTAL"    IntObjectName = "PORTAL"    MessageId = "EAI000000173648687"    MessageType = "PORTAL"    Timestamp = "03/07/2015 11:14:48">    <ListOfTmResourceAvailabilityCheck>        <TmCutPremiseIntegration>            <AddressId>248243</AddressId>            <Id>2-1XV4F0U</Id>            <ListOfTmCutAssetMgmt-ServiceMeterIntegration>                <TmCutAssetMgmt-ServiceMeterIntegration>                    <ServicePointInstanceId>HS1007017111</ServicePointInstanceId>                    <Status2>Reserve Success</Status2>                    <TMReservationId>RESV2-1XV4C2Q</TMReservationId>                    <ListOfTmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>ServiceabilityFlag</Name>                            <Value>Y</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>ResourceabilityFlag</Name>                            <Value>Y</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>Copper TM</Name>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>DDP</Name>                            <Value>SAL_F024_0030</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>LocationDP</Name>                            <Value>BUILDING FLOOR</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>TypeDP</Name>                            <Value>VDSL</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>FiberToPremise</Name>                            <Value>N</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>PremiseType</Name>                            <Value>MEDIUM COST FLAT</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>SiteNameExchange</Name>                            <Value>SAL</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>ServiceAddressPTT</Name>                            <Value>SELANGOR BARAT</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>TypeResource</Name>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>NumberChange</Name>                            <Value>N</Value>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>BuildingContact</Name>                            <Value/>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>BuildingAccessRestrictions</Name>                            <Value/>                        </TmAssetMgmt-AssetXaIntegration>                        <TmAssetMgmt-AssetXaIntegration>                            <Name>BuildingComments</Name>                            <Value/>                        </TmAssetMgmt-AssetXaIntegration>                    </ListOfTmAssetMgmt-AssetXaIntegration>                    <TMHSBASendEmailFlag>N</TMHSBASendEmailFlag>                    <TMHSBABWThreshold>Current</TMHSBABWThreshold>                </TmCutAssetMgmt-ServiceMeterIntegration>            </ListOfTmCutAssetMgmt-ServiceMeterIntegration>        </TmCutPremiseIntegration>    </ListOfTmResourceAvailabilityCheck></SiebelMessage>'
#no open orders
    elsif @event == 'SBLOpenOrderCheck1'
 	puts "checking for open orders"
     return "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><PortalMessage> <Header> <BusinessEvent>SBLOpenOrderCheck</BusinessEvent> <Timestamp>07/03/2015 10:52:40</Timestamp> <ErrorCode/> <ErrorMessage/> </Header> <Response> <SiebelAddress> <SiebelAddressId>2-1XV4F0U</SiebelAddressId> <OrderExist>N</OrderExist> <SmartnessFlag>N</SmartnessFlag> <ResellerMatchFlag/> <OpenOrderFlag>N</OpenOrderFlag> <HsbaBtuFlag>N</HsbaBtuFlag>  </SiebelAddress> </Response></PortalMessage>"
#with open orders
    elsif @event == 'SBLOpenOrderCheck'
     puts "returning open orders as Y"
     return "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><PortalMessage> <Header> <BusinessEvent>SBLOpenOrderCheck</BusinessEvent> <Timestamp>07/03/2015 10:52:40</Timestamp> <ErrorCode/> <ErrorMessage/> </Header> <Response> <SiebelAddress> <SiebelAddressId>2-1XV4F0U</SiebelAddressId> <OrderExist>N</OrderExist> <SmartnessFlag>N</SmartnessFlag> <ResellerMatchFlag/> <OpenOrderFlag>Y</OpenOrderFlag> <HsbaBtuFlag>N</HsbaBtuFlag>  </SiebelAddress> </Response></PortalMessage>"
     elsif @event == 'ServicePointDetailsUpdate'
     puts "ServicePointDetailsUpdate"
     return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><PortalMessage>    <Header>        <BusinessEvent>ServicePointDetailsUpdate</BusinessEvent>        <Timestamp>07/03/2015 11:14:55</Timestamp>        <ReqResType>Response</ReqResType>        <ErrorCode/>        <ErrorMessage/>    </Header>    <Response>        <Status>OK</Status>    </Response></PortalMessage>'
   elsif @event == "AppointmentBookingPortalSWIFT"
   content_type 'text/xml'
   puts "AppointmentBookingPortalSWIFT"
   return '<?xml version="1.0" encoding="utf-8" standalone="no"?><PortalMessage><Header><BusinessEvent>AppointmentBookingPortal</BusinessEvent><Timestamp>23/03/2015 11:23:15</Timestamp><ReqResType>Response</ReqResType></Header><Response><AppointmentActivity><AppointmentActivityId>3-1300005313934-5C111A65-F144</AppointmentActivityId><ExternalActivityId/><ActivityType>Installation</ActivityType><DateTimeStart>17/07/2015 09:30:00</DateTimeStart><DateTimeEnd>17/07/2015 12:00:00</DateTimeEnd><Duration>150</Duration></AppointmentActivity></Response></PortalMessage>'
   elsif @event == "SWIFTAppointmentCreateSbl"
   content_type 'text/xml'
   puts "SWIFTAppointmentCreateSbl"
   return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><PortalMessage><Header><BusinessEvent>SWIFTAppointmentCreateSbl</BusinessEvent><Timestamp>07/03/15 11:23:29</Timestamp><ReqResType>Response</ReqResType><ErrorCode/><ErrorMessage/></Header><Response><ActivityInformation><SBLActivityId>2-1XV49J2</SBLActivityId><SWIFTActivityId>3-1300005313934-5C111A65-F144</SWIFTActivityId></ActivityInformation></Response></PortalMessage>'
#   elsif @event == "SWIFTAppointmentCreateSbl"
#   content_type 'text/xml'
#   puts "SWIFTAppointmentCreateSbl"
#   return '<?xml version="1.0" encoding="UTF-8" standalone="no" ?><PortalMessage><Header><BusinessEvent>SWIFTAppointmentCreateSbl</BusinessEvent><Timestamp>06/11/30 11:25:57</Timestamp><ReqResType>Response</ReqResType><ErrorCode>(SBL-BPR-00162)--IDS_ERR_EAI_SA_PICK_VALIDATE</ErrorCode><ErrorMessage>Error invoking service "EAI Siebel Adapter", method "Upsert" at step "Create Slot".(SBL-BPR-00162) -- Cannot find entry "ABCD" in the bounded picklist for the field "Service Region" in integration component "TM Action Integration"(SBL-EAI-04401)</ErrorMessage></Header><Response><ActivityInformation><SBLActivityId>DUMMY</SBLActivityId><SWIFTActivityId>3-1300005313934-5C111A65-F144</SWIFTActivityId></ActivityInformation></Response></PortalMessage>'
   elsif @event == "NOVAIDResetSWIFT"
   content_type 'text/xml'
   puts "NOVAIDResetSWIFT"
   return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><SiebelMessage BusinessEvent = "NOVAIDResetSWIFT" IntObjectFormat = "PORTAL" IntObjectName = "PORTAL" MessageId = "1300005313934"><ListOfTmSwiftOrderIdReset><TmActionIntegration><ActivityId>3-1300005313934-5C111A65-F144</ActivityId></TmActionIntegration></ListOfTmSwiftOrderIdReset></SiebelMessage>'
   elsif @event == "BillingAccountCreateCRM"
   content_type 'text/xml'
   puts "BillingAccountCreateCRM"
   return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><PortalMessage><Header><BusinessEvent>BillingAccountCreateCRM</BusinessEvent><Timestamp>07/03/2015 11:29:13</Timestamp><ErrorMessage/><ErrorCode/><ReqResType>Response</ReqResType></Header><Response><BillingAccountRowId>2-1XV4F2T</BillingAccountRowId><BillingAccountNo>1016587188</BillingAccountNo><Status>OK</Status><BillingProfileRowId>2-1XV4F2X</BillingProfileRowId></Response></PortalMessage>'
  elsif @event == "LoginReserve"
   content_type 'text/xml'
   puts "LoginReserve"
   return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><SiebelMessage    BusinessEvent = "LoginReserve"    ErrorCode = ""    ErrorMessage = ""    IntObjectFormat = "PORTAL"    IntObjectName = "PORTAL"    MessageId = "1300005313934"    MessageType = "PORTAL"    Timestamp = "07/03/2015 11:13:04">    <ListOfTmLoginReserveUnreserve>        <TmOrderEntry-LineItemsIntegration>            <OrderLineItemId>PR007003-1</OrderLineItemId>            <TMSecondaryServiceId>rMkMrpMBgUgZk</TMSecondaryServiceId>            <TMReservationStatus>Reserve Success</TMReservationStatus>            <ItemStatus/>            <ServiceId>digitaltest@unifi</ServiceId>        </TmOrderEntry-LineItemsIntegration>        <TmOrderEntry-LineItemsIntegration>            <OrderLineItemId>PR000330-2</OrderLineItemId>            <TMSecondaryServiceId>pHrabHWTJTqVT</TMSecondaryServiceId>            <TMReservationStatus>Reserve Success</TMReservationStatus>            <ItemStatus/>            <ServiceId>digitaltest</ServiceId>        </TmOrderEntry-LineItemsIntegration>    </ListOfTmLoginReserveUnreserve></SiebelMessage>'
  elsif @event == "iJoinOrderDetailRetrieve"
   content_type 'text/xml'
   puts "iJoinOrderDetailRetrieve"
   return '<?xml version="1.0" encoding="utf-8" standalone="no"?><iJoinOrderDetailRetrieveResponse>    <BusinessEvent>iJoinOrderDetailRetrieve</BusinessEvent>    <Timestamp>06/25/2030 10:37:46</Timestamp>    <MessageId>MessageId111111</MessageId>    <ErrorCode/>    <ErrorMessage/>    <Response>        <MobileNumber>1234567890</MobileNumber>        <OrderNumber>1-4801017144</OrderNumber>        <OrderStatus>Completed</OrderStatus>        <CustomerSiebelRowId>1-27EEGMC</CustomerSiebelRowId>        <SwiftFulfillmentFlag/>        <SlotStatus>Scheduled</SlotStatus>        <DateAndTimeInstallation>06/09/2030 09:30:00</DateAndTimeInstallation>        <InstallerName>UIPOF - MUHAMMAD IZZAD EZMIEL ROSHAIZAD</InstallerName>        <InstallerMobileNumber/>    </Response></iJoinOrderDetailRetrieveResponse>'
  elsif @event == "OrderListRetrieve"
   content_type 'text/xml'
   puts "OrderListRetrieve"
   return '<?xml version="1.0" encoding="UTF-8"?><PortalMessage><Header><BusinessEvent>OrderListRetrieve</BusinessEvent><ErrorMessage /><Timestamp>07/01/2030 16:36:29</Timestamp><ErrorCode /><ReqResType>Response</ReqResType></Header><Response><LastPage>true</LastPage><OrderList><CampaignName /><OrderID>1-4809067878</OrderID><CreateDate>07/01/2030 13:19:15</CreateDate><OrderType>New Install</OrderType><Status>PONR</Status><OrderCompletionDate /><SourcePortal>Customer Portal</SourcePortal><CustomerAccountName>SUMALATHA</CustomerAccountName><CAPrimaryIDType>Passport</CAPrimaryIDType><CAPrimaryIDNumber>BN3456</CAPrimaryIDNumber><BTUServiceId /><OrderRowID>1-27J70IU</OrderRowID></OrderList></Response></PortalMessage>'
  elsif @event == "OrderSubmitPortalRetail"
   content_type 'text/xml'
   puts "OrderSubmitPortalRetail"
   return '<PortalMessage><Header><BusinessEvent>OrderSubmitPortalRetail</BusinessEvent><Timestamp>07/03/2015 11:31:11</Timestamp><ReqResType>Request</ReqResType></Header><Request></Request></PortalMessage>'
   elsif @event == "BookingInfoSendSWIFT"
   content_type 'text/xml'
   puts "BookingInfoSendSWIFT"
   return '<?xml version="1.0" encoding="UTF-8" standalone="no"?><SiebelMessage BusinessEvent = "BookingInfoSendSWIFT" ErrorCode = "" ErrorMessage = "" IntObjectFormat = "PORTAL" IntObjectName = "PORTAL" MessageId = "EAI000000173648686" Timestamp = "03/14/15 11:14:45"><ListOfTmOrderCreateNew><TmOrderEntry-OrdersIntegration><OrderNumber>1300005313934</OrderNumber><Id>1300005313934</Id></TmOrderEntry-OrdersIntegration></ListOfTmOrderCreateNew></SiebelMessage>'
  end
end